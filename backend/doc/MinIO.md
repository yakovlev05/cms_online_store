# –ü—Ä–æ–±–ª–µ–º—ã / —Ç–æ–Ω–∫–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å MinIO

*[MinIO](https://min.io/) - —ç—Ç–æ S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ*

1. [–ù–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è bucket](#–Ω–µ-—Å–æ–∑–¥–∞—ë—Ç—Å—è-bucket)

## –ù–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è bucket ü§ï

–í—Å—è –ø—Ä–æ–±–ª–µ–º–∞ —Å–≤—è–∑–∞–Ω–∞ —Å url –∞–¥—Ä–µ—Å–∞–º–∏.  
–í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –ø—É—Å—Ç—å s3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–æ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É ```s3.yakovlev05.ru```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç AWS S3 SDK (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ç Amazon)

Url –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å bucket –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫: ```<–Ω–∞–∑–≤–∞–Ω–∏–µ bucket>.s3.yakovlev05.ru```
–¢–æ –µ—Å—Ç—å, –µ—Å–ª–∏ –∏–º—è backet = *images*, —Ç–æ url: ```images.s3.yakovlev05.ru```  
–°—Ç–∏–ª—å: *Virtual-Host-Style*

### –ö–∞–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç MinIO

–í –º–æ—ë–º —Å–ª—É—á–∞–µ —è –∑–∞–ø—É—Å–∫–∞–ª MinIO –≤ docker –∏ —É–∫–∞–∑—ã–≤–∞–ª –≤—Å–µ–≥–æ –¥–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- ```MINIO_ROOT_USER```
- ```MINIO_ROOT_PASSWORD```

–ü—Ä–∏ —Ç–∞–∫–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ MinIO –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∏–ª—å *Path-Style*  
–¢–æ –µ—Å—Ç—å –µ—Å–ª–∏ bucket = *images*, —Ç–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –Ω–µ–º—É –±—É–¥–µ—Ç –ø–æ –ø—É—Ç–∏ ```s3.yakovlev05.ru/images```

–ß—Ç–æ–±—ã –≤ MinIO –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å *Virtual-Host-Style*, —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å
–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è ```MINIO_DOMAIN``` (–Ω–∞–ø—Ä–∏–º–µ—Ä: yakovlev05.ru –∏–ª–∏ s3.localhost)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å *Path-Style*, —Ç–æ –≤ *S3Client* –¥–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```
.serviceConfiguration(S3Configuration.builder()
    .pathStyleAccessEnabled(true) // –í–∫–ª—é—á–∏—Ç—å Path-Style
    .build())
```

### –°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª (–ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ —á—Ç–æ bucket –ø—É–±–ª–∏—á–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è)
- bucket = images
- —Ñ–∞–π–ª = cat.jpg

`http://localhost:9000/images/cat.jpg`

`http://images.s3.localhost:9000/cat.png`
